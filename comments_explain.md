POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My Reply "C" to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 2 more replies SADECE BENİM "C" YE ATILMIŞ 1.SEVİYE YORUMLAR]


---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------


POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Comment B TO A]     <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My "C" Reply to B]                  <- Aynı hizada, HER ZAMAN görünür


---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------


POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
[My C Reply to A BURASI DA YUKARDAKİ N ALANINA DAHİL ARADA YORUMUM OLSA DA SON YORUM GÖSTERİLİR BU N REPLY KISMINA DAHİL OLUR]                  
|
|  (vertical çizgi)
|
[My D Reply to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 1 more replies SADECE BENİM "D" YE ATILMIŞ 1.SEVİYE YORUMLAR BURADA AŞAĞIDA G Yİ KASTEDİYORUM]   
|
|
[SOMEONE G Reply to MY D] ( YUKARDAKİ D REPLIYIMN ALTINDAKI SHOW 1 MORE REPLY BASINCA GÖZÜKÜR)  
|
|
[SOMEONE H Reply to MY G] (GÖZÜKMEZ ALAKASI YOK BİZLE)


---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------


POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
[My C Reply to A BURASI DA YUKARDAKİ N ALANINA DAHİL ARADA YORUMUM OLSA DA SON YORUM GÖSTERİLİR BU N REPLY KISMINA DAHİL OLUR]                  
|
|  (vertical çizgi)
|
[My D Reply to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 1 more replies SADECE BENİM "D" YE ATILMIŞ 1.SEVİYE YORUMLAR BURADA AŞAĞIDA G Yİ KASTEDİYORUM]   
|
|
[SOMEONE G Reply to MY D] D ALTINDAKİ SHOW 1 MORE REPLY BASINCA VERTICAL BAĞLANTI İLE GÖZÜKÜR)  
|
|  (vertical çizgi)
|
[Show N more replies]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My V Reply to G]  (D ALTINDAKİ SHOW 1 MORE REPLY BASINCA VERTICAL BAĞLANTI İLE GÖZÜKÜR)


---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
durum not : "benm replylarım her zaman gözükür değil" aşağıda burada acıkladm. bazen more ile yapınca gözükme durumu var.
burası :
[My D Reply to A]        
[Show 1 more replies
.
..
[My V Reply to G] (D ALTINDAKİ SHOW 1 MORE REPLY BASINCA VERTICAL BAĞLANTI İLE GÖZÜKÜR)


POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
[My C Reply to A BURASI DA YUKARDAKİ N ALANINA DAHİL ARADA YORUMUM OLSA DA SON YORUM GÖSTERİLİR BU N REPLY KISMINA DAHİL OLUR]                  
|
|  (vertical çizgi)
|
[My D Reply to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 1 more replies SADECE BENİM "D" YE ATILMIŞ 1.SEVİYE YORUMLAR BURADA AŞAĞIDA G Yİ KASTEDİYORUM]   
|
|
[SOMEONE G Reply to MY D] (D ALTINDAKİ SHOW 1 MORE REPLY BASINCA VERTICAL BAĞLANTI İLE GÖZÜKÜR)  
|
|  (vertical çizgi)
|
[Show N more replies]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My V Reply to G] (D ALTINDAKİ SHOW 1 MORE REPLY BASINCA VERTICAL BAĞLANTI İLE GÖZÜKÜR)


---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------

POST
COMMENT INPUT
{ BURAYA SOCKETTEN COMMENT GELİRSE LOAD MORE COMMENTS }

[Comment A]                      <- Aynı hizada
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My Reply "C" to A]                  <- Aynı hizada, HER ZAMAN görünür
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My Reply "D" to A]                  <- Aynı hizada, HER ZAMAN görünür
|
|  (vertical çizgi)
|
[My Reply "E" to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 3 more replies SADECE BENİM "E" YE ATILMIŞ 1.SEVİYE YORUMLAR]    	
|
|  (vertical çizgi)
|
[Show N more replies - "D" COMMENTİMLE A ARASINDA KALAN TÜM 1. SEVİYE YANİ "A" YA ATILMIŞ YORUMLAR BENİM "C" YORUMUM DAHİL]    <- Aynı hizada, 3 nokta vertical
|
|  (vertical çizgi)
|
[My Reply "F" to A]                  <- Aynı hizada, HER ZAMAN görünür
[Show 2 more replies SADECE BENİM "F" YE ATILMIŞ 1.SEVİYE YORUMLAR]    


bunu her casede çalışacak bir ağaç yapısına dönüştürür müsün. içerde yazdığım her durumu oku. anlayacaksın genel değişmeyecek kemik kuralları veya ekstra caseleri.
bunu yazdım ve claude bu sonuçları cıkardı.

Çıkardığım Kurallar
Temel Kurallar:

Top-level comment (posta direkt atılan) → Her zaman görünür
Benim son reply'ım bir thread'de → Her zaman görünür (o thread'in son halkası olarak)
Benim reply'ıma giden yol (ancestor chain) → Gösterilir (vertical line ile bağlı)
Aradaki diğer reply'lar → "Show N more replies" olarak collapse edilir
Benim reply'ımın altındaki 1. seviye reply'lar → "Show N more replies" olarak gösterilir
Benim reply'ımın altındaki reply'ların altındakiler → Direkt alakasız, gösterilmez

Ağaç Yapısı Algoritması:
Her top-level comment için:
├── Comment göster
│
├── Bu comment'in altında benim reply'ım var mı? (direkt veya nested)
│   ├── EVET:
│   │   ├── Benim EN SON reply'ıma giden path'i bul
│   │   ├── Path üzerindeki her node için:
│   │   │   ├── Önceki node ile arasında başka reply var mı?
│   │   │   │   └── EVET: "Show N more replies" göster (N = aradaki reply sayısı)
│   │   │   └── Node'u göster (vertical line ile bağlı)
│   │   │
│   │   └── Son reply'ımın altında başkalarının reply'ı var mı?
│   │       └── EVET: "Show N more replies" göster
│   │
│   └── HAYIR:
│       └── Reply varsa sadece "Show N replies" göster (tıklanınca aç)
Görsel Algoritma:
POST
COMMENT INPUT
{WebSocket: Yeni comment gelirse → "Load N more comments" butonu}

[Top-Level Comment A]
|
├── [Benim reply'ıma kadar olan aradaki reply'lar varsa]
│   └── "Show N more replies" (collapsed)
|
├── [Benim path'imdeki her comment] (vertical line bağlı)
│   └── Arada başka reply varsa → "Show N more replies"
|
└── [Benim SON reply'ım] (HER ZAMAN görünür)
└── [Altında 1. seviye reply varsa] → "Show N more replies"
Özel Durumlar:

Birden fazla reply'ım aynı parent'a:

[Comment A]
|
[Show N more] ← Arada başkaları varsa
|
[My C to A]
|
[Show N more] ← C ile D arasında başkaları varsa  
|
[My D to A]
|
[My E to A] ← Son reply'm, her zaman görünür
[Show 3 replies] ← E'ye atılan reply'lar

Nested reply'ım başkasının reply'ına:

[Comment A]
|
[Show N more] ← A'ya atılan diğer reply'lar (benim path'im dışında)
|
[Someone B to A] ← Benim reply attığım kişi
|
[Show N more] ← B'ye atılan diğer reply'lar
|
[My C to B] ← HER ZAMAN görünür
[Show 2 replies] ← C'ye atılan reply'lar

Derin nested (expand sonrası):

[My D to A]
[Show 1 more] ← Tıklandığında:
|
[Someone G to D]
|
[Show N more] ← G'ye atılanlar (benim V hariç)
|
[My V to G] ← Bu da benim, gösterilir

Backend'den şu yapıda data gelmesi lazım:
typescriptinterface CommentWithThread {
_id: string
// ... diğer comment fields

// Thread chain - benim reply'ıma giden yol
threadChain: {
comment: Comment
hiddenBefore: number  // Bu comment'ten önce kaç hidden var
}[]

// Son reply'ımın altındaki reply sayısı
childRepliesCount: number
}

fakat api kısmına dikkat etmek gerekiyor ve nested yapıya. 
modern sistemlerde nasıl yazılıyorsa öyle yaz kodu. eksik bir validation 
nested websocket yapısına dikkat et. modern sistemlerdeki gibi yap.
bağlantılı vertical olması gerekenlerin çizgileri elementlerdeki paddingleriden dolayı birleşmeyebiliyor buna dikkat et.
